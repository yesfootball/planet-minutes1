services:
  - type: web
    name: planet-minutes-api
    env: docker
    rootDir: api
    dockerfilePath: api/Dockerfile
    plan: free
    autoDeploy: true
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: minutesdb
          property: connectionString

  - type: web
    name: planet-minutes-web
    env: docker
    rootDir: webapp
    dockerfilePath: webapp/Dockerfile
    plan: free
    autoDeploy: true
    envVars:
      - key: NEXT_PUBLIC_API_BASE
        sync: false

databases:
  - name: minutesdb
